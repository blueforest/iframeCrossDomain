   <!DOCTYPE html>
   <html>
   <head>
   <meta charset="utf-8" />
    
    <title>b页面</title>
    <style type="text/css">
    *{ margin:0; padding: 0;}
    body{font-size: 12px;}
    .test{width: 960px; height: 300px; border: 1px solid #f30;background: #ccc; margin: 0 auto;}
    </style>
   </head>
   <body>
   <div class="test">
   </div>
   <iframe src="" id="iframeb" style="display:none"></iframe>
   <script>
   function sethash(){
    var hashH = document.documentElement.scrollHeight; 
    urlC = "http://www.a.test/agent.html"; 
    document.getElementById("iframeb").src=urlC+"#"+hashH; 
}
window.onload=sethash;

//html5 postMessage
if( window.postMessage ){
     var message = document.documentElement.scrollHeight;
    window.parent.postMessage(message,'http://www.a.test')
}

   </script>
   </body></html>